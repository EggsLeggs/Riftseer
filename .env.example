# ─── API ───────────────────────────────────────────────────────────────────────
CARD_PROVIDER=supabase
API_PORT=3000
LOG_LEVEL=info

# Fuzzy match threshold for fuse.js (0 = exact, 1 = anything). Default: 0.4
FUZZY_THRESHOLD=0.4

# How often to refresh the in-memory card index from Supabase (ms). Default: 6h
CACHE_REFRESH_INTERVAL_MS=21600000

# ─── Supabase (required) ───────────────────────────────────────────────────────
SUPABASE_URL=https://<project-ref>.supabase.co
SUPABASE_SERVICE_ROLE_KEY=<service-role-key>

# ─── Redis (optional — speeds up provider restarts via snapshot cache) ─────────
# Default: redis://localhost:6379 (matches docker-compose Redis service)
REDIS_URL=redis://localhost:6379

# ─── Discord Bot (packages/discord-bot) ────────────────────────────────────────
# Set via: wrangler secret put <NAME>  (not needed for local API dev)
# DISCORD_PUBLIC_KEY=     # Ed25519 public key — Discord Developer Portal
# DISCORD_BOT_TOKEN=      # Bot token — Discord Developer Portal → Bot
# DISCORD_APPLICATION_ID= # App ID — Discord Developer Portal → General Information
# Public vars (API_BASE_URL, SITE_BASE_URL) live in packages/discord-bot/wrangler.jsonc

# ─── Ingest Worker (packages/ingest-worker) ────────────────────────────────────
# Set via: wrangler secret put <NAME>  (not needed for local API dev)
# RIFTCODEX_BASE_URL is a plain var in ingest-worker/wrangler.toml
# SUPABASE_URL and SUPABASE_SERVICE_ROLE_KEY must also be set as worker secrets

# ─── Reddit Bot (packages/reddit-bot) ──────────────────────────────────────────
# Standalone Devvit app — configured per-install via Devvit settings, not env vars.
# apiBaseUrl and siteBaseUrl are set after deploy: npx devvit settings set apiBaseUrl
